(globalThis.webpackChunkcoblocks=globalThis.webpackChunkcoblocks||[]).push([[669],{3803:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=n(998).A},998:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(1609),s=n(5573);const r=(0,o.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(s.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"}))},8669:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>B});var o=n(1609),s=n(2485),r=n.n(s),l=n(9859),a=n.n(l),c=n(8468),i=n(9668),m=n(1455),u=n.n(m),d=n(7723),p=n(9491),h=n(6087),g=n(9877),v=n(3832),b=n(8443),f=n(7143),_=n(4715),y=n(6427),k=n(4871),E=n.n(k);const w=({children:e,gutter:t,gutterCustom:n,className:o,condition:s=!0})=>{if(!(0,h.isValidElement)(e))return e;if(void 0!==e.props.blockProps){const o={blockProps:{...e.props.blockProps,className:r()(e.props.blockProps.className,{[`has-${t}-gutter`]:t&&!!s})}};return"custom"===t&&void 0!==n&&(o.blockProps.style={"--coblocks-custom-gutter":`${n}em`}),(0,h.cloneElement)(e,o)}const l={className:r()(o,e.props.className,{[`has-${t}-gutter`]:t&&!!s})};return e.props.style&&(l.style={...e.props.style}),"custom"===t&&void 0!==n&&(l.style={...l.style,"--coblocks-custom-gutter":`${n}em`}),(0,h.cloneElement)(e,l)};var S=n(3803),x=n(5573);const z=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M4 18h6V6H4v12zm9-9.5V10h7V8.5h-7zm0 7h7V14h-7v1.5z"})),P=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M14 6v12h6V6h-6zM4 10h7V8.5H4V10zm0 5.5h7V14H4v1.5z"})),C={};C.styleHorizontalImageRight=(0,o.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 26",height:"26",width:"56"},(0,o.createElement)(y.Path,{d:"m48 11.0910645v-10.00000005h-10v10.00000005zm-40-6.00000005h24v-2h-24zm0 4v-2h18v2zm40 16.00000005h-10v-10h10zm-40-6v-2h24v2zm0 4v-2h18v2z"})),C.styleHorizontalImageLeft=(0,o.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 26",height:"26",width:"56"},(0,o.createElement)(y.Path,{d:"m18 11.0910645v-10.00000005h-10v10.00000005zm6-6.00000005h24v-2h-24zm0 4v-2h18v2zm-6 16.00000005h-10v-10h10zm6-6v-2h24v2zm0 4v-2h18v2z"})),C.styleStacked=(0,o.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 26",height:"26",width:"56"},(0,o.createElement)(y.Path,{d:"m26 17v-16h-16v16zm-16 4h10v-2h-10zm0 4v-2h10v2zm36-8h-16v-16h16zm-16 4v-2h10v2zm0 4v-2h10v2z"}));const N=C;function L(){return(0,o.createElement)(y.PanelBody,{initialOpen:!1,title:(0,o.createElement)("span",{className:"coblocks-ellipsis-loading"},(0,d.__)("Loading Inspector","coblocks"))},(0,o.createElement)(y.Spinner,null))}function T({children:e}){return(0,o.createElement)(_.InspectorControls,null,(0,o.createElement)(h.Suspense,{fallback:(0,o.createElement)(L,null)},e))}const A=(0,h.lazy)((()=>n.e(342).then(n.bind(n,4342)))),I={per_page:-1},R=wp.tokenList,V=[{name:"stacked",
/* translators: block style */
label:(0,d.__)("Stacked","coblocks"),icon:N.styleStacked,isDefault:!0},{name:"horizontal",
/* translators: block style */
label:(0,d.__)("Horizontal","coblocks"),icon:N.styleHorizontalImageRight,iconAlt:N.styleHorizontalImageLeft}];function U(e,t){for(const n of new R(t).values()){if(-1===n.indexOf("is-style-"))continue;const t=n.substring(9),o=(0,c.find)(e,{name:t});if(o)return o}return(0,c.find)(e,"isDefault")}const B=(0,p.compose)([(0,f.withSelect)(((e,t)=>{const{postsToShow:n,order:o,orderBy:s,categories:r,categoryRelation:l}=t.attributes,{getEntityRecords:a,getMedia:i}=e("core"),{getCurrentPost:m}=e("core/editor"),u=y.QueryControls.toString().includes("selectedCategories"),d=m();return{latestPosts:u?(()=>{const t=r&&r.length>0?r.map((e=>e?.id)):[],m=(0,c.pickBy)({categories:t,order:o,orderby:s,per_page:"and"===l?"-1":n,exclude:d.id},(e=>!(0,c.isUndefined)(e)));let u=a("postType","post",m);return"and"===l&&u&&(u=u.filter((e=>(0,c.isEqual)(e.categories.concat().sort(),t.concat().sort()))).slice(0,n)),Array.isArray(u)?u.map((t=>{if(t.featured_media){const n=i(t.featured_media);let o=(0,c.get)(n,["media_details","sizes","source_url"],null);return o||(o=(0,c.get)(n,"source_url",null)),{...t,featured_media_object:t.featured_media&&e("core").getMedia(t.featured_media)}}return t})):u})():(()=>{const t=(0,c.pickBy)({categories:r,order:o,orderby:s,per_page:n,exclude:d.id},(e=>!(0,c.isUndefined)(e)));let l=a("postType","post",t);return l&&(l=l.map((t=>({...t,featured_media_object:t.featured_media&&e("core").getMedia(t.featured_media)})))),l})(),useUpdatedQueryControls:u}}))])((e=>{const{attributes:t,setAttributes:n,className:s,latestPosts:l}=e,{displayPostContent:m,displayPostDate:f,displayPostLink:k,postLink:x,postFeedType:C,externalRssUrl:N,columns:L,postsToShow:B,excerptLength:H,listPosition:M,imageSize:F,imageStyle:j}=t,[O,G]=(0,h.useState)([]),[$,D]=(0,h.useState)(N),[Q]=(0,h.useState)(2),[Z]=(0,h.useState)(1),[q,J]=(0,h.useState)(!!(s.includes("is-style-stacked")&&L!==Q||s.includes("is-style-horizontal")&&L!==Z)),K=(0,p.usePrevious)(s);let W=(0,h.useRef)(!0);const X=U(V,s);(0,h.useEffect)((()=>(re(X),u()({path:(0,v.addQueryArgs)("/wp/v2/categories",I)}).then((e=>{W&&G(e)})).catch((()=>{W&&G([])})),()=>{W=!1})),[]),(0,h.useEffect)((()=>{k&&!m&&n({displayPostLink:!1}),s!==K&&(s.includes("is-style-stacked")&&n({columns:q?L:Q}),s.includes("is-style-horizontal")&&n({columns:q?L:Z}))}),[K,s,q,L,Q,Z]);const Y=[{icon:S.A,title:(0,d.__)("Edit RSS URL","coblocks"),onClick:()=>D(!0)}],ee=Array.isArray(l)&&l.length,te=Array.isArray(l)&&l.length>B?l.slice(0,B):l,ne=(0,c.some)(te,"featured_media_object"),oe=[{icon:(0,o.createElement)(y.Icon,{icon:z}),title:(0,d.__)("Image on left","coblocks"),isActive:"left"===M,onClick:()=>n({listPosition:"left"})},{icon:(0,o.createElement)(y.Icon,{icon:P}),title:(0,d.__)("Image on right","coblocks"),isActive:"right"===M,onClick:()=>n({listPosition:"right"})}],se=(0,b.__experimentalGetSettings)().formats.date,re=e=>{const o=U(V,s),r=function(e,t,n){const o=new R(e);return t&&o.remove("is-style-"+t.name),o.add("is-style-"+n.name),o.value}(t.className,o,e);n({className:r})},le=()=>{J(!0)};if(!ee&&"internal"===C)return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(T,null,(0,o.createElement)(A,{...e,attributes:t,hasPosts:ee,hasFeaturedImage:ne,editing:$,activeStyle:X,styleOptions:V,onUpdateStyle:re,categoriesList:O,postCount:l&&l.length})),(0,o.createElement)(y.Placeholder,{icon:(0,o.createElement)(y.Icon,{icon:i.xy6}),label:(0,d.__)("Blog Posts","coblocks")},Array.isArray(l)?(0,o.createElement)(o.Fragment,null,(0,d.__)("No posts found. Start publishing or add posts from an RSS feed.","coblocks"),(0,o.createElement)(y.Button,{className:"components-placeholder__cancel-button",title:(0,d.__)("Retrieve an External Feed","coblocks"),isSecondary:!0,onClick:()=>{n({postFeedType:"external"})}},(0,d.__)("Use External Feed","coblocks"))):(0,o.createElement)(y.Spinner,null)));if($&&"external"===C)return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(T,null,(0,o.createElement)(A,{...e,onUserModifiedColumn:le,attributes:t,hasPosts:ee,hasFeaturedImage:!1,editing:$,activeStyle:X,styleOptions:V,onUpdateStyle:re,categoriesList:O,postCount:l&&l.length})),(0,o.createElement)(y.Placeholder,{icon:(0,o.createElement)(y.Icon,{icon:i.xy6}),label:(0,d.__)("RSS Feed","coblocks"),instructions:(0,d.__)("RSS URLs are generally located at the /feed/ directory of a site.","coblocks")},(0,o.createElement)("form",{onSubmit:e=>{e.preventDefault(),N&&D(!1)}},(0,o.createElement)(y.TextControl,{placeholder:(0,d.__)("https://example.com/feed…","coblocks"),value:N,onChange:e=>n({externalRssUrl:e}),className:"components-placeholder__input"}),(0,o.createElement)(y.Button,{type:"submit",disabled:!N},(0,d.__)("Use URL","coblocks")))));const ae=a()(s,"is-style-horizontal"),ce=a()(s,"is-style-stacked");return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(T,null,(0,o.createElement)(A,{...e,onUserModifiedColumn:le,attributes:t,hasPosts:ee,hasFeaturedImage:ne,editing:$,activeStyle:X,styleOptions:V,onUpdateStyle:re,categoriesList:O,postCount:l&&l.length})),(0,o.createElement)(_.BlockControls,null,ae&&(0,o.createElement)(y.Toolbar,{controls:oe}),"external"===C&&(0,o.createElement)(y.Toolbar,{controls:Y})),"external"===C&&(0,o.createElement)(y.Disabled,null,(0,o.createElement)(E(),{block:"coblocks/posts",attributes:t})),"internal"===C&&(0,o.createElement)("div",{className:s},(0,o.createElement)(w,{...t,condition:t.columns>=2},(0,o.createElement)("div",{className:r()("wp-block-coblocks-posts__inner",{"has-columns":L,[`has-${L}-columns`]:L,"has-responsive-columns":L,"has-image-right":ae&&"right"===M,[`has-${F}-image`]:ae,[`has-${j}-image`]:j})},te.map(((e,t)=>{const s=e.featured_media_object?e.featured_media_object.source_url:null,l="url("+s+")",a=r()("wp-block-coblocks-posts__content",{"self-center":ae&&!m&&L<=2}),c=e.title.rendered.trim();let i=e.excerpt.rendered;""===e.excerpt.raw&&(i=e.content.raw);const u=document.createElement("div");return u.innerHTML=i,i=u.textContent||u.innerText||"",(0,o.createElement)("div",{key:t,className:"wp-block-coblocks-posts__item"},s&&(0,o.createElement)("div",{className:"wp-block-coblocks-posts__image"},(0,o.createElement)("div",{className:"bg-cover bg-center-center",style:{backgroundImage:l}})),(0,o.createElement)("div",{className:a},ce&&f&&e.date_gmt&&(0,o.createElement)("time",{dateTime:(0,b.format)("c",e.date_gmt),className:"wp-block-coblocks-posts__date"},(0,b.dateI18n)(se,e.date_gmt)),(0,o.createElement)(y.Disabled,null,(0,o.createElement)("a",{href:e.link,target:"_blank",rel:"noreferrer noopener",alt:c},c?(0,o.createElement)(h.RawHTML,null,c)
/* translators: placeholder when a post has no title */:(0,d.__)("(no title)","coblocks"))),ae&&f&&e.date_gmt&&(0,o.createElement)("time",{dateTime:(0,b.format)("c",e.date_gmt),className:"wp-block-coblocks-posts__date"},(0,b.dateI18n)(se,e.date_gmt)),m&&(0,o.createElement)("div",{className:"wp-block-coblocks-posts__excerpt"},(0,o.createElement)(h.RawHTML,{key:"html"},H<i.trim().split(" ").length?(0,g.escapeHTML)(i.trim().split(" ",H).join(" "))+"…":(0,g.escapeHTML)(i.trim().split(" ",H).join(" ")))),k&&(0,o.createElement)(_.RichText,{tagName:"a",className:"wp-block-coblocks-posts__more-link",onChange:e=>n({postLink:e}),value:x,placeholder:(0,d.__)("Read more","coblocks"),multiline:!1,withoutInteractiveFormatting:!1,isSelected:!1})))}))))))}))},2485:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var l=s.apply(null,n);l&&e.push(l)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)o.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},6131:(e,t,n)=>{var o=n(2523),s=n(5463),r=n(6959);e.exports=function(e,t,n){return t==t?r(e,t,n):o(e,s,n)}},5463:e=>{e.exports=function(e){return e!=e}},514:(e,t,n)=>{var o=n(4932);e.exports=function(e,t){return o(t,(function(t){return e[t]}))}},6959:e=>{e.exports=function(e,t,n){for(var o=n-1,s=e.length;++o<s;)if(e[o]===t)return o;return-1}},9859:(e,t,n)=>{var o=n(6131),s=n(4894),r=n(5015),l=n(1489),a=n(5880),c=Math.max;e.exports=function(e,t,n,i){e=s(e)?e:a(e),n=n&&!i?l(n):0;var m=e.length;return n<0&&(n=c(m+n,0)),r(e)?n<=m&&e.indexOf(t,n)>-1:!!m&&o(e,t,n)>-1}},5015:(e,t,n)=>{var o=n(2552),s=n(6449),r=n(346);e.exports=function(e){return"string"==typeof e||!s(e)&&r(e)&&"[object String]"==o(e)}},5880:(e,t,n)=>{var o=n(514),s=n(5950);e.exports=function(e){return null==e?[]:o(e,s(e))}}}]);