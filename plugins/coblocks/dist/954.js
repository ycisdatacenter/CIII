(self.webpackChunkcoblocks=self.webpackChunkcoblocks||[]).push([[954],{4896:function(e,t,n){"use strict";var o=n(8824);t.Z=o.Z},8824:function(e,t,n){"use strict";var o=n(9196),s=n(444);const r=(0,o.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(s.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"}));t.Z=r},7954:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var o=n(9196),s=n(4184),r=n.n(s),l=n(4721),a=n.n(l),c=n(2819),i=n(7635),m=n(6989),u=n.n(m),d=n(5736),p=n(4333),h=n(9307),g=n(6483),f=n(9771),v=n(9818),b=n(2175),_=n(5609),k=n(8423),y=n.n(k),E=({children:e,gutter:t,gutterCustom:n,className:o,condition:s=!0})=>{if(!(0,h.isValidElement)(e))return e;if(void 0!==e.props.blockProps){const o={blockProps:{...e.props.blockProps,className:r()(e.props.blockProps.className,{[`has-${t}-gutter`]:t&&!!s})}};return"custom"===t&&void 0!==n&&(o.blockProps.style={"--coblocks-custom-gutter":`${n}em`}),(0,h.cloneElement)(e,o)}const l={className:r()(o,e.props.className,{[`has-${t}-gutter`]:t&&!!s})};return e.props.style&&(l.style={...e.props.style}),"custom"===t&&void 0!==n&&(l.style={...l.style,"--coblocks-custom-gutter":`${n}em`}),(0,h.cloneElement)(e,l)},w=n(4896),S=n(444),x=(0,o.createElement)(S.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(S.Path,{d:"M4 18h6V6H4v12zm9-9.5V10h7V8.5h-7zm0 7h7V14h-7v1.5z"})),z=(0,o.createElement)(S.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(S.Path,{d:"M14 6v12h6V6h-6zM4 10h7V8.5H4V10zm0 5.5h7V14H4v1.5z"}));const P={};P.styleHorizontalImageRight=(0,o.createElement)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 26",height:"26",width:"56"},(0,o.createElement)(_.Path,{d:"m48 11.0910645v-10.00000005h-10v10.00000005zm-40-6.00000005h24v-2h-24zm0 4v-2h18v2zm40 16.00000005h-10v-10h10zm-40-6v-2h24v2zm0 4v-2h18v2z"})),P.styleHorizontalImageLeft=(0,o.createElement)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 26",height:"26",width:"56"},(0,o.createElement)(_.Path,{d:"m18 11.0910645v-10.00000005h-10v10.00000005zm6-6.00000005h24v-2h-24zm0 4v-2h18v2zm-6 16.00000005h-10v-10h10zm6-6v-2h24v2zm0 4v-2h18v2z"})),P.styleStacked=(0,o.createElement)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 26",height:"26",width:"56"},(0,o.createElement)(_.Path,{d:"m26 17v-16h-16v16zm-16 4h10v-2h-10zm0 4v-2h10v2zm36-8h-16v-16h16zm-16 4v-2h10v2zm0 4v-2h10v2z"}));var C=P;function N(){return(0,o.createElement)(_.PanelBody,{initialOpen:!1,title:(0,o.createElement)("span",{className:"coblocks-ellipsis-loading"},(0,d.__)("Loading Inspector","coblocks"))},(0,o.createElement)(_.Spinner,null))}function I({children:e}){return(0,o.createElement)(b.InspectorControls,null,(0,o.createElement)(h.Suspense,{fallback:(0,o.createElement)(N,null)},e))}const L=(0,h.lazy)((()=>n.e(758).then(n.bind(n,8758)))),R={per_page:-1},T=wp.tokenList,V=[{name:"stacked",
/* translators: block style */
label:(0,d.__)("Stacked","coblocks"),icon:C.styleStacked,isDefault:!0},{name:"horizontal",
/* translators: block style */
label:(0,d.__)("Horizontal","coblocks"),icon:C.styleHorizontalImageRight,iconAlt:C.styleHorizontalImageLeft}];function A(e,t){for(const n of new T(t).values()){if(-1===n.indexOf("is-style-"))continue;const t=n.substring(9),o=(0,c.find)(e,{name:t});if(o)return o}return(0,c.find)(e,"isDefault")}var U=(0,p.compose)([(0,v.withSelect)(((e,t)=>{const{postsToShow:n,order:o,orderBy:s,categories:r,categoryRelation:l}=t.attributes,{getEntityRecords:a,getMedia:i}=e("core"),{getCurrentPost:m}=e("core/editor"),u=_.QueryControls.toString().includes("selectedCategories"),d=m();return{latestPosts:u?(()=>{const t=r&&r.length>0?r.map((e=>e?.id)):[],m=(0,c.pickBy)({categories:t,order:o,orderby:s,per_page:"and"===l?"-1":n,exclude:d.id},(e=>!(0,c.isUndefined)(e)));let u=a("postType","post",m);return"and"===l&&u&&(u=u.filter((e=>(0,c.isEqual)(e.categories.concat().sort(),t.concat().sort()))).slice(0,n)),Array.isArray(u)?u.map((t=>{if(t.featured_media){const n=i(t.featured_media);let o=(0,c.get)(n,["media_details","sizes","source_url"],null);return o||(o=(0,c.get)(n,"source_url",null)),{...t,featured_media_object:t.featured_media&&e("core").getMedia(t.featured_media)}}return t})):u})():(()=>{const t=(0,c.pickBy)({categories:r,order:o,orderby:s,per_page:n,exclude:d.id},(e=>!(0,c.isUndefined)(e)));let l=a("postType","post",t);return l&&(l=l.map((t=>({...t,featured_media_object:t.featured_media&&e("core").getMedia(t.featured_media)})))),l})(),useUpdatedQueryControls:u}}))])((e=>{const{attributes:t,setAttributes:n,className:s,latestPosts:l}=e,{displayPostContent:m,displayPostDate:v,displayPostLink:k,postLink:S,postFeedType:P,externalRssUrl:C,columns:N,postsToShow:U,excerptLength:B,listPosition:F,imageSize:H,imageStyle:M}=t,[j,O]=(0,h.useState)([]),[G,$]=(0,h.useState)(C),[D]=(0,h.useState)(2),[Z]=(0,h.useState)(1),[Q,q]=(0,h.useState)(!!(s.includes("is-style-stacked")&&N!==D||s.includes("is-style-horizontal")&&N!==Z)),J=(0,p.usePrevious)(s);let K=(0,h.useRef)(!0);const W=A(V,s);(0,h.useEffect)((()=>(se(W),u()({path:(0,g.addQueryArgs)("/wp/v2/categories",R)}).then((e=>{K&&O(e)})).catch((()=>{K&&O([])})),()=>{K=!1})),[]),(0,h.useEffect)((()=>{k&&!m&&n({displayPostLink:!1}),s!==J&&(s.includes("is-style-stacked")&&n({columns:Q?N:D}),s.includes("is-style-horizontal")&&n({columns:Q?N:Z}))}),[J,s,Q,N,D,Z]);const X=[{icon:w.Z,title:(0,d.__)("Edit RSS URL","coblocks"),onClick:()=>$(!0)}],Y=Array.isArray(l)&&l.length,ee=Array.isArray(l)&&l.length>U?l.slice(0,U):l,te=(0,c.some)(ee,"featured_media_object"),ne=[{icon:(0,o.createElement)(_.Icon,{icon:x}),title:(0,d.__)("Image on left","coblocks"),isActive:"left"===F,onClick:()=>n({listPosition:"left"})},{icon:(0,o.createElement)(_.Icon,{icon:z}),title:(0,d.__)("Image on right","coblocks"),isActive:"right"===F,onClick:()=>n({listPosition:"right"})}],oe=(0,f.__experimentalGetSettings)().formats.date,se=e=>{const o=A(V,s),r=function(e,t,n){const o=new T(e);return t&&o.remove("is-style-"+t.name),o.add("is-style-"+n.name),o.value}(t.className,o,e);n({className:r})},re=()=>{q(!0)};if(!Y&&"internal"===P)return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(I,null,(0,o.createElement)(L,{...e,attributes:t,hasPosts:Y,hasFeaturedImage:te,editing:G,activeStyle:W,styleOptions:V,onUpdateStyle:se,categoriesList:j,postCount:l&&l.length})),(0,o.createElement)(_.Placeholder,{icon:(0,o.createElement)(_.Icon,{icon:i.Qgu}),label:(0,d.__)("Blog Posts","coblocks")},Array.isArray(l)?(0,o.createElement)(o.Fragment,null,(0,d.__)("No posts found. Start publishing or add posts from an RSS feed.","coblocks"),(0,o.createElement)(_.Button,{className:"components-placeholder__cancel-button",title:(0,d.__)("Retrieve an External Feed","coblocks"),isSecondary:!0,onClick:()=>{n({postFeedType:"external"})}},(0,d.__)("Use External Feed","coblocks"))):(0,o.createElement)(_.Spinner,null)));if(G&&"external"===P)return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(I,null,(0,o.createElement)(L,{...e,onUserModifiedColumn:re,attributes:t,hasPosts:Y,hasFeaturedImage:!1,editing:G,activeStyle:W,styleOptions:V,onUpdateStyle:se,categoriesList:j,postCount:l&&l.length})),(0,o.createElement)(_.Placeholder,{icon:(0,o.createElement)(_.Icon,{icon:i.Qgu}),label:(0,d.__)("RSS Feed","coblocks"),instructions:(0,d.__)("RSS URLs are generally located at the /feed/ directory of a site.","coblocks")},(0,o.createElement)("form",{onSubmit:e=>{e.preventDefault(),C&&$(!1)}},(0,o.createElement)(_.TextControl,{placeholder:(0,d.__)("https://example.com/feed…","coblocks"),value:C,onChange:e=>n({externalRssUrl:e}),className:"components-placeholder__input"}),(0,o.createElement)(_.Button,{type:"submit",disabled:!C},(0,d.__)("Use URL","coblocks")))));const le=a()(s,"is-style-horizontal"),ae=a()(s,"is-style-stacked");return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(I,null,(0,o.createElement)(L,{...e,onUserModifiedColumn:re,attributes:t,hasPosts:Y,hasFeaturedImage:te,editing:G,activeStyle:W,styleOptions:V,onUpdateStyle:se,categoriesList:j,postCount:l&&l.length})),(0,o.createElement)(b.BlockControls,null,le&&(0,o.createElement)(_.Toolbar,{controls:ne}),"external"===P&&(0,o.createElement)(_.Toolbar,{controls:X})),"external"===P&&(0,o.createElement)(_.Disabled,null,(0,o.createElement)(y(),{block:"coblocks/posts",attributes:t})),"internal"===P&&(0,o.createElement)("div",{className:s},(0,o.createElement)(E,{...t,condition:t.columns>=2},(0,o.createElement)("div",{className:r()("wp-block-coblocks-posts__inner",{"has-columns":N,[`has-${N}-columns`]:N,"has-responsive-columns":N,"has-image-right":le&&"right"===F,[`has-${H}-image`]:le,[`has-${M}-image`]:M})},ee.map(((e,t)=>{const s=e.featured_media_object?e.featured_media_object.source_url:null,l="url("+s+")",a=r()("wp-block-coblocks-posts__content",{"self-center":le&&!m&&N<=2}),c=e.title.rendered.trim();let i=e.excerpt.rendered;""===e.excerpt.raw&&(i=e.content.raw);const u=document.createElement("div");return u.innerHTML=i,i=u.textContent||u.innerText||"",(0,o.createElement)("div",{key:t,className:"wp-block-coblocks-posts__item"},s&&(0,o.createElement)("div",{className:"wp-block-coblocks-posts__image"},(0,o.createElement)("div",{className:"bg-cover bg-center-center",style:{backgroundImage:l}})),(0,o.createElement)("div",{className:a},ae&&v&&e.date_gmt&&(0,o.createElement)("time",{dateTime:(0,f.format)("c",e.date_gmt),className:"wp-block-coblocks-posts__date"},(0,f.dateI18n)(oe,e.date_gmt)),(0,o.createElement)(_.Disabled,null,(0,o.createElement)("a",{href:e.link,target:"_blank",rel:"noreferrer noopener",alt:c},c?(0,o.createElement)(h.RawHTML,null,c)
/* translators: placeholder when a post has no title */:(0,d.__)("(no title)","coblocks"))),le&&v&&e.date_gmt&&(0,o.createElement)("time",{dateTime:(0,f.format)("c",e.date_gmt),className:"wp-block-coblocks-posts__date"},(0,f.dateI18n)(oe,e.date_gmt)),m&&(0,o.createElement)("div",{className:"wp-block-coblocks-posts__excerpt"},(0,o.createElement)(h.RawHTML,{key:"html"},B<i.trim().split(" ").length?i.trim().split(" ",B).join(" ")+"…":i.trim().split(" ",B).join(" "))),k&&(0,o.createElement)(b.RichText,{tagName:"a",className:"wp-block-coblocks-posts__more-link",onChange:e=>n({postLink:e}),value:S,placeholder:(0,d.__)("Read more","coblocks"),multiline:!1,withoutInteractiveFormatting:!1,isSelected:!1})))}))))))}))},4184:function(e,t){var n;!function(){"use strict";var o={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var l=s.apply(null,n);l&&e.push(l)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)o.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},2118:function(e,t,n){var o=n(1848),s=n(2722),r=n(2351);e.exports=function(e,t,n){return t==t?r(e,t,n):o(e,s,n)}},2722:function(e){e.exports=function(e){return e!=e}},7415:function(e,t,n){var o=n(9932);e.exports=function(e,t){return o(t,(function(t){return e[t]}))}},2351:function(e){e.exports=function(e,t,n){for(var o=n-1,s=e.length;++o<s;)if(e[o]===t)return o;return-1}},4721:function(e,t,n){var o=n(2118),s=n(8612),r=n(7037),l=n(554),a=n(2628),c=Math.max;e.exports=function(e,t,n,i){e=s(e)?e:a(e),n=n&&!i?l(n):0;var m=e.length;return n<0&&(n=c(m+n,0)),r(e)?n<=m&&e.indexOf(t,n)>-1:!!m&&o(e,t,n)>-1}},7037:function(e,t,n){var o=n(4239),s=n(1469),r=n(7005);e.exports=function(e){return"string"==typeof e||!s(e)&&r(e)&&"[object String]"==o(e)}},2628:function(e,t,n){var o=n(7415),s=n(3674);e.exports=function(e){return null==e?[]:o(e,s(e))}}}]);