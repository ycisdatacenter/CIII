jQuery(document).ready(function(a){var e=function(){var e='<li><a href="" data-sort="gd-recommended" class="js-gd-recommended">'+gdThemesTab.tab+"</a></li>";a(".wp-filter > .filter-links").prepend(e),a(".page-title-action").attr("aria-expanded",!0)},t=function(){var e=a(".add-new-theme");e.remove(),a(".theme-browser .themes").prepend(e)},s=wp.themes.view.Installer.prototype,d=a("body");wp.themes.view.Installer=wp.themes.view.Installer.extend({events:function(){var e=_.extend({},s.events,{"click .filter-links li > a.js-gd-recommended":"gdThemes"});return delete e["click .filter-links li > a"],e["click .filter-links li > a:not( .js-gd-recommended )"]="onSort",e},browse:function(e){"gd-recommended"===e?this.loadThemes():this.collection.query({browse:e})},gdThemes:function(e){e.preventDefault(),this.clearSearch();var e=a(e.target),t=e.data("sort");e.hasClass(this.activeClass)||(d.removeClass("filters-applied show-filters"),a(".drawer-toggle").attr("aria-expanded","false"),d.removeClass("show-favorites-form"),a(".filter-links li > a, .theme-filter").removeClass(this.activeClass),a('[data-sort="'+t+'"]').addClass(this.activeClass),this.loadThemes(),wp.themes.router.navigate(wp.themes.router.baseUrl(wp.themes.router.browsePath+t)))},loadThemes:function(){d.addClass("loading-content").removeClass("no-results"),a.post(ajaxurl,{action:"gd_render_themes"},function(e){e.success&&(d.removeClass("loading-content"),a(".theme-browser .themes").empty().append(e.data),a(".theme-count").text(a(".theme-browser .themes > div.theme").length))}),a("#gd-theme-install").length||a(".theme-browser .themes").after('<div id="gd-theme-install" style="display:none;"></div>')},scroller:function(){a(".js-gd-recommended").hasClass("current")||s.scroller.apply(this,arguments)}});var n=function(t){var e={action:"gd_install_theme",slug:t.data("slug"),gd_package:t.data("package"),_ajax_nonce:t.data("nonce")};a.post(ajaxurl,e,function(e){e.success?a('div[data-slug="'+t.data("slug")+'"]').append('<div class="notice notice-success notice-alt"><p>'+gdThemesTab.installed+"</p></div>").removeClass("focus").find(".theme-actions > .theme-install").removeClass("updating-message").text(gdThemesTab.installed).addClass("disabled").delay(1500).replaceWith('<a class="button button-primary activate-theme" href="'+e.data.activateUrl+'">'+gdThemesTab.activate+'</a><a class="button button-secondary live-preview-theme" href="'+e.data.customizeUrl+'">'+gdThemesTab.live_preview+"</a>"):(a('div[data-slug="'+t.data("slug")+'"]').append('<div class="notice notice-error notice-alt update-message"><p>'+gdThemesTab.error+"</p></div>"),t.removeClass("updating-message"))})};e(),a(window).on("load",t),a(document).on("click",".theme.godaddy .theme-screenshot, .theme.godaddy .more-details",function(){var e=a(this).closest(".theme.godaddy").attr("data-demo-url");window.open(e,"_blank")}),a(document).on("click",".theme.godaddy .button.theme-install",function(e){e.preventDefault(),e.stopPropagation(),a(this).addClass("updating-message").parents("div.theme").addClass("focus"),n(a(this))})});